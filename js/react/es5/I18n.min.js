!function(){"use strict";function l(e,t){if(e=e,!(null!=(t=t)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t))throw new TypeError("Cannot call a class as a function")}function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var t,a,n=(t=o,(a=[{key:"onLangStart",value:function(e){this.state.startCallback=e}},{key:"onLangLoaded",value:function(e){this.state.loadedCallback=e}},{key:"onHashChange",value:function(){var t,e=this,a=this.state,n=null;0===window.location.hash.indexOf("#/")&&(""!==(n=window.location.hash.split("/")[1])&&-1!==a.supportedLocales.indexOf(n)||(n=null)),null===n&&(n=a.defaultLocale),a.currentLocale!==n&&(a.currentLocale=n,this.state.startCallback&&this.state.startCallback(),t=a.fileDir+"/"+a.fileName+"."+a.currentLocale+".json",void 0!==a.langCache[t]?(a.langText=a.langCache[t],e.updatePageTitle(),a.loadedCallback&&a.loadedCallback()):fetch(t,{mode:"cors",cache:"no-store",credentials:"same-origin"}).then(function(e){var t=e.status;if(200<=t&&t<300||304===t)return Promise.resolve(e);e="Error loading data. Server Response Code: "+t+", Response Text: "+e.statusText;return Promise.reject(e)}).then(function(e){return e.json()}).then(function(e){a.langCache[t]=e}).catch(function(e){e="Error Downloading I18N file: ["+t+"], Response Code Status: "+e.message;console.error(e),a.langCache[t]={}}).finally(function(){a.langText=a.langCache[t],e.updatePageTitle(),a.loadedCallback&&a.loadedCallback()}))}},{key:"updatePageTitle",value:function(){var e=document.querySelector("html title[data-i18n]");e&&(e.textContent=this.text(e.getAttribute("data-i18n"))),document.documentElement.lang=this.state.currentLocale}},{key:"text",value:function(e){return this.state.langText&&this.state.langText[e]?this.state.langText[e]:e}},{key:"currentLocale",get:function(){return this.state.currentLocale}},{key:"getUserDefaultLang",get:function(){if(navigator.languages&&navigator.languages.length&&this.state.supportedLocales&&this.state.supportedLocales.length)for(var e=0,t=navigator.languages.length;e<t;e++)if(-1!==this.state.supportedLocales.indexOf(navigator.languages[e]))return navigator.languages[e];return this.state.defaultLocale}}])&&e(t.prototype,a),n&&e(t,n),o);function o(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"_",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"i18n";if(l(this,o),"string"!=typeof e)throw new Error("Error - I18n - Missing default locale. See examples for usage.");if(!Array.isArray(t))throw new Error("Error - I18n - Missing or invalid supported locales. See examples for usage.");this.state={fileName:a,fileDir:n,defaultLocale:e,supportedLocales:t,currentLocale:null,langText:{},langCache:{},startCallback:null,loadedCallback:null},window.addEventListener("hashchange",this.onHashChange.bind(this)),this.onHashChange()}window.I18n=n}();